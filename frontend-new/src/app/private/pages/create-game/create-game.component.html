<app-layout></app-layout>

<div class="container mx-auto">
  <h2 class="text-2xl font-bold mb-6 text-center">Crear Nuevo Juego</h2>
  <form [formGroup]="gameForm" (ngSubmit)="createGame()">
    <div class="mb-4">
      <label for="title" class="block text-sm font-medium text-gray-700"
        >Título</label
      >
      <input
        id="title"
        pInputText
        formControlName="title"
        placeholder="Título del juego"
        class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
      />
      <div
        *ngIf="gameForm.get('title')?.invalid && gameForm.get('title')?.touched"
        class="text-red-600 mt-1 text-sm"
      >
        El título es requerido.
      </div>
    </div>

    <div class="mb-4">
      <label for="description" class="block text-sm font-medium text-gray-700"
        >Descripción</label
      >
      <textarea
        id="description"
        pInputTextarea
        formControlName="description"
        placeholder="Descripción del juego"
        class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
      ></textarea>
      <div
        *ngIf="
          gameForm.get('description')?.invalid &&
          gameForm.get('description')?.touched
        "
        class="text-red-600 mt-1 text-sm"
      >
        La descripción es requerida.
      </div>
    </div>

    <div class="mb-4">
      <label for="mainPhoto" class="block text-sm font-medium text-gray-700"
        >Foto Principal(solo formatos .jpg, .jpeg y .png)</label
      >
      <p-fileUpload
        name="mainPhoto"
        accept="image/*"
        (onSelect)="onSelectMainPhoto($event)"
        [customUpload]="true"
        chooseLabel="Seleccionar Foto Principal"
      ></p-fileUpload>
      <div
        *ngIf="
          gameForm.get('mainPhoto')?.invalid &&
          gameForm.get('mainPhoto')?.touched
        "
        class="text-red-600 mt-1 text-sm"
      >
        La foto principal es requerida.
      </div>
    </div>

    <div class="mb-4">
      <label for="status" class="block text-sm font-medium text-gray-700"
        >Estado</label
      >
      <p-dropdown
        id="status"
        [options]="statusOptions"
        formControlName="status"
        [style]="{ width: '100%' }"
        class="mt-1 block w-full"
      ></p-dropdown>
    </div>

    <div class="mb-4">
      <label for="tags" class="block text-sm font-medium text-gray-700"
        >Etiquetas</label
      >
      <input
        id="tags"
        pInputText
        formControlName="tags"
        placeholder="Etiquetas separadas por comas"
        class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
      />
    </div>

    <div class="mb-4">
      <label for="photoGallery" class="block text-sm font-medium text-gray-700"
        >Galería de Fotos(solo formatos .jpg, .jpeg y .png)</label
      >
      <p-fileUpload
        name="photoGallery"
        accept="image/*"
        (onSelect)="onSelectPhotoGallery($event)"
        [customUpload]="true"
        [multiple]="true"
        chooseLabel="Seleccionar Fotos"
      ></p-fileUpload>
    </div>

    <div class="mt-6 flex justify-center gap-4">
      <button
        pButton
        type="button"
        label="Cancelar"
        routerLink="/dashboard"
        class="p-button-secondary"
      ></button>
      <button
        pButton
        type="submit"
        label="Crear Juego"
        [disabled]="gameForm.invalid"
      ></button>
    </div>
  </form>
  <p-toast></p-toast>
</div>
